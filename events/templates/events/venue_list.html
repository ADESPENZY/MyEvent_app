{% extends 'base.html' %}

{% block main %}

<section class="flex flex-col items-center mt-10 space-y-6 w-full max-w-3xl mx-auto px-4">
    <h1 class="font-bold text-3xl text-teal-700 mb-6">Our Venues</h1>

    {% for venue in venues %}
    <div class="flex justify-between items-center w-full bg-white p-6 shadow-md rounded-lg mb-4 hover:shadow-lg transition-shadow duration-200">
        <div>
            <a href="{% url 'show-venue' venue.id %}" class="text-xl font-semibold text-gray-800 hover:text-teal-600">
                {{ venue }} - <span class="text-teal-500">{{ venue.web }}</span>
            </a>
        </div>

        <!-- Button Container -->
        {% if user.is_authenticated %}

        <div class="flex space-x-3">                
            <!-- Update Button -->
            <a href="{% url 'update-venue' venue.id %}" class="px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 focus:outline-none transition-colors duration-200">
                Update
            </a>

            <!-- Delete Button -->
            <form action="{% url 'delete-venue' venue.id %}" method="post" onsubmit="return confirm('Are you sure you want to delete this event?');">
                {% csrf_token %}
                <button type="submit" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 focus:outline-none transition-colors duration-200">
                    Delete
                </button>
            </form>
        </div>
        
        {% endif %}

    </div>
    {% endfor %}

    <!-- <div class="pagination">
        {% if venues.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ venues.previous_page_number }}">Previous</a>
        {% endif %}
    
        Page {{ venues.number }} of {{ venues.paginator.num_pages }}
    
        {% if venues.has_next %}
            <a href="?page={{ venues.next_page_number }}">Next</a>
            <a href="?page={{ venues.paginator.num_pages }}">Last &raquo;</a>

        {% endif %}
    </div> -->

    <div class="flex justify-center items-center space-x-2 mt-6">
        {% if venues.has_previous %}
            <a href="?page=1" class="pagination-btn bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition duration-200">&laquo; First</a>
            <a href="?page={{ venues.previous_page_number }}" class="pagination-btn bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition duration-200">Previous</a>
        {% endif %}
    
        {% for page_num in venues.paginator.page_range %}
            {% if page_num == venues.number %}
                <span class="pagination-btn active bg-yellow-500 text-black py-2 px-4 rounded-lg font-semibold">{{ page_num }}</span>
            {% elif page_num >= venues.number|add:'-2' and page_num <= venues.number|add:'2' %}
                <a href="?page={{ page_num }}" class="pagination-btn bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition duration-200">{{ page_num }}</a>
            {% elif page_num == 1 %}
                <a href="?page=1" class="pagination-btn bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition duration-200">1</a>
                {% if venues.number > 3 %} <span class="dots px-2">...</span> {% endif %}
            {% elif page_num == venues.paginator.num_pages %}
                {% if venues.number < venues.paginator.num_pages|add:'-2' %} <span class="dots px-2">...</span> {% endif %}
                <a href="?page={{ venues.paginator.num_pages }}" class="pagination-btn bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition duration-200">{{ venues.paginator.num_pages }}</a>
            {% endif %}
        {% endfor %}
    
        {% if venues.has_next %}
            <a href="?page={{ venues.next_page_number }}" class="pagination-btn bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition duration-200">Next</a>
            <a href="?page={{ venues.paginator.num_pages }}" class="pagination-btn bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition duration-200">Last &raquo;</a>
        {% endif %}
    </div>
    

</section>

{% endblock %}
